<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Kkokki - Digital Rooster</title>

    <!-- PWA -->
    <link rel="manifest" href="/static/manifest.json">
    <meta name="theme-color" content="#181511">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Kkokki">
    <link rel="apple-touch-icon" href="/static/assets/icon_kkokki_main_1769947399319.png">

    <!-- Styles -->
    <link rel="stylesheet" href="/static/style.css">

    <!-- MapLibre GL JS -->
    <link rel="stylesheet" href="https://unpkg.com/maplibre-gl@4.7.1/dist/maplibre-gl.css">
    <script src="https://unpkg.com/maplibre-gl@4.7.1/dist/maplibre-gl.js"></script>
</head>
<body>

<div class="app-container">

    <!-- ═══════════════════════════════════════════════════════ -->
    <!-- SCREEN 1: MAP                                          -->
    <!-- ═══════════════════════════════════════════════════════ -->
    <section id="screen-map" class="screen active">
        <!-- Search Header -->
        <div class="search-container">
            <div class="search-box">
                <span class="search-icon">&#x1F50D;</span>
                <input type="text" id="searchInput" class="search-input"
                       placeholder="SEARCH DESTINATION" autocomplete="off">
                <span id="searchModeIndicator" class="search-mode-indicator">START</span>
            </div>
            <div id="searchResults" class="search-results"></div>
        </div>

        <!-- Map -->
        <div class="map-wrapper">
            <div id="map"></div>
            <button class="map-settings-btn" id="mapSettingsBtn" title="Settings">&#x2699;</button>
        </div>

        <!-- Bottom Controls -->
        <div class="bottom-controls">
            <!-- Transport Mode -->
            <div class="transport-selector">
                <button class="transport-btn active" data-mode="car">
                    <img src="/static/assets/icon_set_weather_traffic_1769947517891.png" class="transport-icon" alt="">
                    <span>DRIVING</span>
                </button>
                <button class="transport-btn" data-mode="transit">
                    <span class="transport-emoji">&#x1F687;</span>
                    <span>TRANSIT</span>
                </button>
                <button class="transport-btn" data-mode="walk">
                    <span class="transport-emoji">&#x1F6B6;</span>
                    <span>WALK</span>
                </button>
            </div>

            <!-- Quest Card -->
            <div class="quest-card">
                <div class="pixel-corner pc-tl"></div>
                <div class="pixel-corner pc-tr"></div>
                <div class="pixel-corner pc-bl"></div>
                <div class="pixel-corner pc-br"></div>

                <div class="quest-content">
                    <div class="quest-details">
                        <div class="route-setup">
                            <div class="route-row selecting" id="rowStart" data-target="start">
                                <span class="route-label label-start">START</span>
                                <span id="startDisplay" class="route-value empty">Tap map or search...</span>
                                <button class="route-set-btn" id="setStartBtn" title="Set start point">&#x1F4CD;</button>
                            </div>
                            <div class="route-row" id="rowEnd" data-target="end">
                                <span class="route-label label-end">DEST</span>
                                <span id="endDisplay" class="route-value empty">Tap map or search...</span>
                                <button class="route-set-btn" id="setEndBtn" title="Set destination">&#x1F4CD;</button>
                            </div>
                            <button class="swap-btn" id="swapBtn" title="Swap">&#x21C5;</button>
                        </div>

                        <p id="statusText" class="quest-status-text">
                            Select start point on map.
                        </p>
                    </div>

                    <div class="quest-thumbnail">
                        <div id="questThumb" class="thumb-img"
                             style="background-image: url('/static/assets/bg_home_sunny_1769947415146.png')"></div>
                    </div>
                </div>

                <div class="quest-stat">
                    <span class="quest-stat-label">&#x23F0; ARRIVAL</span>
                    <input type="time" id="targetTime" value="09:00" class="time-input">
                </div>

                <!-- Start Button -->
                <button id="startAdventureBtn" class="start-btn" disabled>
                    <img src="/static/assets/ui_btn_journey_1769947501593.png" class="btn-icon" alt="">
                    <span>START ADVENTURE</span>
                </button>
            </div>
        </div>
    </section>

    <!-- ═══════════════════════════════════════════════════════ -->
    <!-- SCREEN 2: MAIN MONITOR                                 -->
    <!-- ═══════════════════════════════════════════════════════ -->
    <section id="screen-main" class="screen">
        <div class="main-header">
            <button class="back-to-map-btn" id="backToMapBtn" title="Back to map">&#x2190;</button>
            <div class="main-header-left">
                <span class="header-label">DEPARTURE IN:</span>
            </div>
            <button class="hamburger-btn" id="menuBtn">&#x2261;</button>
        </div>

        <div class="countdown-area">
            <div class="countdown-timer" id="countdownTimer">00:00</div>
            <div class="info-bar">
                <div class="info-item">
                    <span class="info-label">&#x23F0; ALARM</span>
                    <span class="info-value" id="infoWake">--:--</span>
                </div>
                <div class="info-item">
                    <span class="info-label">&#x1F6AA; DEPART</span>
                    <span class="info-value" id="infoDepart">--:--</span>
                </div>
                <div class="info-item">
                    <span class="info-label">&#x1F3C1; ARRIVE</span>
                    <span class="info-value" id="infoArrive">--:--</span>
                </div>
            </div>
        </div>

        <div class="character-scene" id="characterScene">
            <img class="scene-bg" id="sceneBg"
                 src="/static/assets/bg_home_sunny_1769947415146.png" alt="">
        </div>

        <div class="main-bottom">
            <div class="toggle-row">
                <button class="monitor-toggle" id="monitorToggle">
                    <span class="toggle-track">
                        <span class="toggle-thumb"></span>
                    </span>
                    <span class="toggle-text" id="toggleText">ON</span>
                </button>
            </div>
            <div class="log-console" id="logConsole">
                <div class="log-entry">[--:--] Kkokki: Ready to roll!</div>
            </div>
        </div>
    </section>

    <!-- ═══════════════════════════════════════════════════════ -->
    <!-- SCREEN 3: SETTINGS (Equipment Setup)                   -->
    <!-- ═══════════════════════════════════════════════════════ -->
    <section id="screen-settings" class="screen">
        <div class="settings-card">
            <div class="settings-header">
                <button class="back-btn" id="settingsBackBtn">&#x2190;</button>
                <h2 class="settings-title">Equipment Setup</h2>
                <div class="settings-char">
                    <img src="/static/assets/char_kkokki_idle_1769947451923.png" class="settings-char-img" alt="">
                </div>
            </div>

            <!-- Prep Time -->
            <div class="setting-group">
                <label class="setting-label">Prep Time <span class="setting-unit">(MINUTES)</span></label>
                <div class="slider-container">
                    <input type="range" id="prepSlider" class="retro-slider" min="10" max="60" step="5" value="30">
                    <div class="slider-value" id="prepValue">30</div>
                </div>
                <div class="slider-labels">
                    <span>Quick 10min</span>
                    <span>Full 60min</span>
                </div>
            </div>

            <!-- Buffer Time -->
            <div class="setting-group">
                <label class="setting-label">Buffer Time <span class="setting-unit">(MINUTES)</span></label>
                <div class="slider-container">
                    <input type="range" id="bufferSlider" class="retro-slider" min="10" max="60" step="5" value="30">
                    <div class="slider-value" id="bufferValue">30</div>
                </div>
                <div class="slider-labels">
                    <span>Lv.1 Quick Ready</span>
                    <span>Lv.3 Luxury Ready</span>
                </div>
            </div>

            <!-- BGM Select -->
            <div class="setting-group">
                <label class="setting-label">BGM Select</label>
                <div class="bgm-list">
                    <div class="bgm-item active" data-bgm-value="bgm_1">
                        <input type="radio" name="bgm" value="bgm_1" checked>
                        <span class="bgm-icon">&#x1F3B5;</span>
                        <span class="bgm-name">내사람 (Inst.)</span>
                        <button type="button" class="bgm-preview-btn" data-bgm="bgm_1">&#x25B6;</button>
                    </div>
                    <div class="bgm-item disabled" data-bgm-value="bgm_2">
                        <input type="radio" name="bgm" value="bgm_2" disabled>
                        <span class="bgm-icon">&#x2694;&#xFE0F;</span>
                        <span class="bgm-name">Boss Battle</span>
                        <span class="bgm-coming-soon">Coming Soon</span>
                    </div>
                    <div class="bgm-item disabled" data-bgm-value="bgm_3">
                        <input type="radio" name="bgm" value="bgm_3" disabled>
                        <span class="bgm-icon">&#x1F31F;</span>
                        <span class="bgm-name">Hero's Morning</span>
                        <span class="bgm-coming-soon">Coming Soon</span>
                    </div>
                </div>
            </div>

            <!-- Toggles -->
            <div class="setting-group">
                <label class="toggle-setting">
                    <span class="toggle-icon">&#x1F514;</span>
                    <span class="toggle-label-text">Early Warning <small>(5 MIN BEFORE)</small></span>
                    <input type="checkbox" id="earlyWarningToggle" class="retro-checkbox">
                    <span class="checkbox-visual"></span>
                </label>
                <label class="toggle-setting">
                    <span class="toggle-icon">&#x1F6A8;</span>
                    <span class="toggle-label-text">Urgent Traffic Alert <small>(INSTANT NOTIFY)</small></span>
                    <input type="checkbox" id="urgentAlertToggle" class="retro-checkbox" checked>
                    <span class="checkbox-visual"></span>
                </label>
            </div>

            <!-- Route Checks -->
            <div class="setting-group">
                <label class="setting-label">Route Checks <span class="setting-unit">(TIMES)</span></label>
                <div class="slider-container">
                    <input type="range" id="checkCountSlider" class="retro-slider" min="3" max="20" step="1" value="5">
                    <div class="slider-value" id="checkCountValue">5</div>
                </div>
                <div class="slider-labels">
                    <span>Lv.1 Battery Saver</span>
                    <span>Lv.3 Always Updated</span>
                </div>
            </div>

            <!-- Wake-up Time Preview -->
            <div class="wake-time-preview">
                <span>Estimated Wake-up Time:</span>
                <span class="wake-time-value" id="wakeTimePreview">07:00 AM</span>
            </div>
        </div>
    </section>

    <!-- ═══════════════════════════════════════════════════════ -->
    <!-- SCREEN 4: ALARM                                        -->
    <!-- ═══════════════════════════════════════════════════════ -->
    <section id="screen-alarm" class="screen">
        <div class="alarm-container">
            <div class="alarm-time" id="alarmCurrentTime">07:00</div>
            <div class="alarm-char-wrapper">
                <img class="alarm-char" src="/static/assets/char_kkokki_panic_1769947468467.png" alt="">
            </div>
            <div class="alarm-label">WAKE UP!</div>
            <button class="alarm-dismiss-btn" id="alarmDismissBtn">
                <img src="/static/assets/ui_btn_journey_1769947501593.png" class="btn-icon" alt="">
                <span>DISMISS</span>
            </button>
        </div>
    </section>

    <!-- Early Warning Overlay -->
    <div class="early-warning-overlay" id="earlyWarningOverlay">
        <div class="early-warning-content">
            <img src="/static/assets/char_kkokki_idle_1769947451923.png" class="early-warning-char" alt="">
            <div class="early-warning-text">5 minutes until wake up...</div>
            <button class="early-warning-dismiss" id="earlyWarningDismiss">OK</button>
        </div>
    </div>

</div>

<script src="/static/app.js"></script>
</body>
</html>
